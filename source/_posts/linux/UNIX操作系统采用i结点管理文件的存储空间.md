---
title: UNIX操作系统采用i结点管理文件的存储空间
date: 2025-03-27 17:51:59
tags:
---

```markdown
## UNIX i 结点管理文件的最大文件长度计算

### 1. 给定条件
- **磁盘块大小** = 2048 字节
- **每个地址占** = 64 位 = **8 字节**
- **i 结点地址项**
  - **10 个直接地址**
  - **1 个一次间接地址**
  - **1 个二次间接地址**
  - **1 个三次间接地址**

### 2. 计算不同寻址方式可管理的文件大小

#### （1）直接地址部分
每个直接地址指向 **1 个磁盘块**，共有 10 个直接地址：
```
10 × 2048 = 20480 字节
```

#### （2）一次间接地址
- 1 个地址项可以存储的地址数：
  ```
2048 ÷ 8 = 256
  ```
- 256 个磁盘块，每个 2048 字节：
  ```
256 × 2048 = 524288 字节 = 512 KB
  ```

#### （3）二次间接地址
- 1 个地址项存 256 个地址，每个地址指向一个间接块，每个间接块又指向 256 个数据块：
  ```
256 × 256 = 65536 个数据块
  ```
- 65536 个数据块，每个 2048 字节：
  ```
65536 × 2048 = 134217728 字节 = 128 MB
  ```

#### （4）三次间接地址
- 1 个地址项存 256 个地址，每个地址指向一个间接块，每个间接块再指向 256 个二次间接块，每个二次间接块又指向 256 个数据块：
  ```
256 × 256 × 256 = 16777216 个数据块
  ```
- 16777216 个数据块，每个 2048 字节：
  ```
16777216 × 2048 = 34359738368 字节 = 32 GB
  ```

### 3. 总文件大小
```
直接地址部分 + 一次间接地址 + 二次间接地址 + 三次间接地址
20480 + 524288 + 134217728 + 34359738368 = 34494963764 字节
```
```
= 32.125 GB

### 4. 结论
该 UNIX 系统能管理的 **单个文件最大长度** 为 **约 32.13 GB**。